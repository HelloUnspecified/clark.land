---
import { getEntry } from 'astro:content';
import Layout from '../layouts/Layout.astro';
import ProfileHeader from '../components/ProfileHeader.astro';
import SocialLinks from '../components/SocialLinks.astro';
import FeaturedCTA from '../components/FeaturedCTA.astro';
import LinkCard from '../components/LinkCard.astro';
import NumberedLinkCard from '../components/NumberedLinkCard.astro';
import AboutMe from '../components/AboutMe.astro';
import ClientLogos from '../components/ClientLogos.astro';
import Testimonials from '../components/Testimonials.astro';
import ShareButtons from '../components/ShareButtons.astro';
import ThemeToggle from '../components/ThemeToggle.astro';
import Footer from '../components/Footer.astro';

const profileEntry = await getEntry('profile', 'clark');
const {
  name,
  tagline,
  initials,
  what,
  keywords,
  socialLinks = [],
  featuredCta,
  numberedCtaLinks = [],
  ctaLinks = [],
  about,
  testimonials = [],
  clients = [],
} = profileEntry?.data || {};
---

<Layout
  title={`${name || 'Clark Sell'} - ${tagline || 'Founder & Tech Leader'}`}
  description={about?.bio ||
    'Passionate technology leader with over 15 years of experience building innovative products and leading high-performing teams. I specialize in creating scalable solutions and fostering engineering excellence.'}
  keywords={keywords}
  author={name || 'Clark Sell'}
  image={about?.picture || '/profile-photo.jpg'}
>
  <ThemeToggle />

  <ProfileHeader
    name={name}
    tagline={tagline}
    initials={initials}
    avatar={about?.picture}
  />

  <!-- Social Links (Horizontal) -->
  <SocialLinks links={socialLinks} />

  <!-- Strategy Call Description -->
  <div class="mb-6 text-center">
    <p
      class="text-gray-700 dark:text-gray-300 text-base leading-relaxed max-w-md mx-auto"
    >
      {what}
    </p>
  </div>

  <!-- Featured CTA -->
  {
    featuredCta && (
      <div class="mt-6">
        <FeaturedCTA
          title={featuredCta.title}
          href={featuredCta.href}
          icon={featuredCta.icon}
        />
      </div>
    )
  }

  <!-- Numbered CTA Links -->
  {
    numberedCtaLinks.length > 0 && (
      <div class="space-y-4 mb-8">
        {numberedCtaLinks.map((link, index) => (
          <NumberedLinkCard
            href={link.href}
            title={link.title}
            number={index + 1}
          />
        ))}
      </div>
    )
  }

  <!-- Divider -->
  {
    numberedCtaLinks.length > 0 && ctaLinks.length > 0 && (
      <div class="flex items-center my-8">
        <div class="flex-1 h-px bg-gradient-to-r from-transparent via-gray-300 dark:via-gray-600 to-transparent" />
      </div>
    )
  }

  <!-- CTA Links (Vertical) -->
  <div class="space-y-4">
    {
      ctaLinks.map((link) => (
        <LinkCard href={link.href} title={link.title} icon={link.icon} />
      ))
    }
    {
      about && (
        <div class="mt-16">
          <AboutMe
            name={name || 'Clark Sell'}
            title={about.title}
            company={about.company}
            bio={about.bio}
            picture={about.picture}
          />
        </div>
      )
    }
  </div>

  <!-- Client Logos Section -->
  {
    clients.length > 0 && (
      <div class="mt-16">
        <ClientLogos clients={clients} />
      </div>
    )
  }

  <!-- Testimonials Section -->
  {
    testimonials.length > 0 && (
      <div class="mt-16">
        <Testimonials testimonials={testimonials} />
      </div>
    )
  }

  <!-- Share Profile Section -->
  <!-- <div class="mt-16">
    <ShareButtons
      title={`${name || 'Clark Sell'} - ${tagline}`}
      description={about?.bio || 'Your digital hub for all things Clark'}
      url={Astro.url.href}
    />
  </div> -->

  <Footer />
</Layout>
